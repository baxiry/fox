


<html dir="rtl">
<head>
<meta charset="UTF-8">
<title>خلاصة Fox – مرجع شامل</title>
<style>
body { background-color: #121212; color: #e0e0e0; font-family: Arial, sans-serif; line-height: 1.6; }
ul, ol { margin: 0 0 1em 1em; }
h1, h2, h3 { color: #ffffff; }
</style>
</head>
<body>
<h1>خلاصة Fox – مرجع شامل</h1>

<h2>1️⃣ الفلسفة والهدف</h2>
<ul>
<li>لغة أنظمة آمنة compile-time، بدون GC.</li>
<li>تمرير أكبر عدد ممكن من البرامج الصحيحة دون رفض (أكثر من Rust).</li>
<li>أمان ذاكرة صارم مع تحكم low-level عند الحاجة (QBE + C ABI + assembly).</li>
<li>تستهدف مهندسي الأنظمة ومحركات الألعاب.</li>
<li>التعايش مع مكتبات C المثبتة (SDL, SQLite, OpenSSL) عبر unsafe محدد.</li>
</ul>

<h2>2️⃣ نموذج الذاكرة</h2>
<ul>
<li>لا يوجد مؤشر إلى مؤشر.</li>
<li>كل alias يشير مباشرة لكائن.</li>
<li>أي متغير داخلي للحزمة: حرية تعديل.</li>
<li>أي متغير من خارج الحزمة: يجب تمريره صراحة في توقيع الدالة.</li>
<li>أي مؤشر صادر: يجب المرور عبر توقيع إرجاع صريح.</li>
</ul>
<h3>arena:</h3>
<ul>
<li>مجموعة مترابطة من الكائنات تُعامل ككيان واحد.</li>
<li>أي alias لعناصرها: يمدد عمر الـ arena بالكامل.</li>
<li>تحرير arena: عند آخر استعمال لأي alias من داخل الحزمة.</li>
<li>لا يوجد نسخ جماعي للـ arena.</li>
<li>أي نسخة صريحة تكون فقط على عنصر فردي.</li>
</ul>
<h3>نسخ الكائنات:</h3>
<ul>
<li>a := b: نسخة مستقلة.</li>
<li>a := &b: alias مباشر.</li>
<li>نسخة خارج arena: مستقلة ولا تمدد عمر arena.</li>
</ul>

<h2>3️⃣ التعامل مع المؤشرات والأمان</h2>
<ul>
<li>لا لمس أو تعديل مؤشرات خارج الحزمة إلا عبر توقيع صريح.</li>
<li>أي تسريب خارجي: تصريح واضح في توقيع الإرجاع.</li>
<li>last-use analysis: المترجم يحدد آخر استعمال لكل alias ويحقن free عند compile-time.</li>
</ul>

<h2>4️⃣ التعامل مع C والموارد الخارجية</h2>
<ul>
<li>جميع دوال C: unsafe افتراضي.</li>
<li>التعامل الآمن إذا:
  <ol>
    <li>الدالة تولد مؤشر: يمكن استخدامه مباشرة.</li>
    <li>الدالة تأخذ مؤشر Fox: تعالجه وتترجعه.</li>
  </ol>
</li>
<li>إمكانية تحسين low-level: كتابة دوال assembly يدوياً، تجميع `.o`، وربطها عبر C ABI.</li>
</ul>

<h2>5️⃣ التزامن وسباقات البيانات</h2>
<ul>
<li>المترجم يحلل تأثيرات المؤشرات على التزامن (atomic / locks).</li>
<li>أي data race غير مثبت: ترجمة تفشل برسالة واضحة.</li>
<li>يضمن الأمان compile-time.</li>
</ul>

<h2>6️⃣ التحسينات الاختيارية</h2>
<ul>
<li>مثال: تسريب عنصر من arena إلى حزمة أخرى:
  <ol>
    <li>نسخ العنصر بالكامل: مستقل عن arena.</li>
    <li>تحرير arena بعد آخر استخدام لعناصرها.</li>
  </ol>
</li>
<li>يسمح بتحسين استغلال الذاكرة دون كسر القواعد الأصلية.</li>
</ul>

<h2>7️⃣ نقاط القوة</h2>
<ul>
<li>أمان compile-time بدون GC.</li>
<li>arena تحل مشاكل pointer-heavy بسهولة.</li>
<li>last-use analysis: تحرير آمن عند compile-time.</li>
<li>أقل رفض للبرامج الصحيحة مقارنة بـ Rust.</li>
<li>تحكم low-level متاح عند الحاجة (QBE + assembly + C ABI).</li>
<li>خلاصات الحزم: تسريع التحليل وإعادة استخدام النتائج.</li>
<li>التعايش مع مكتبات C مثبتة: بيئة Fox غنية بالمكتبات.</li>
</ul>

<h2>8️⃣ نقاط الضعف</h2>
<ul>
<li>قيود على pointer-heavy التقليدية: تحتاج إعادة تصميم أو arena.</li>
<li>مكتبات وأدوات أقل نضجًا مقارنة بـ Rust وGo.</li>
<li>منحنى تعلم جديد (alias-only، arena، قواعد التمرير عبر التوقيع).</li>
<li>تحسين الأداء يتطلب أحيانًا استراتيجيات إضافية (فصل عناصر طويلة العمر عن arena).</li>
<li>الاعتماد على QBE: بعض تحسينات الـ compiler التلقائية أقل من LLVM O3.</li>
</ul>

<h2>9️⃣ خلاصة عملية</h2>
<ul>
<li>Fox = niche language: أمان compile-time + تحكم واضح + arena كحل للمؤشرات المعقدة.</li>
<li>لا تمنع أي خوارزمية صحيحة رياضياً، لكن قد تحتاج إعادة تصميم pointer-heavy structures.</li>
<li>تحسين الأداء ممكن مع عناصر محددة أو دوال معينة دون التأثير على الأمان العام.</li>
<li>arena + alias-only + last-use analysis: أمان، بساطة، ومرونة كبيرة في البرمجة المتزامنة.</li>
<li>التعايش مع مكتبات C الناضجة: يسرع تطوير التطبيقات الواقعية ويزيد اعتماد المطورين على اللغة.</li>
</ul>

</body>
</html>

